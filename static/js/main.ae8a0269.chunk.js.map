{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["proxy","columns","field","headerName","sort","width","type","useStyles","makeStyles","root","backgroundColor","color","sticky","position","left","background","boxShadow","App","classes","useState","data","setData","localArr","getConfig","Promise","resolve","reject","fetch","then","response","json","catch","err","Error","handlePerf","props","ticker","replace","country","id","url","startsWith","rp","html","JSON","parse","contents","doc","DOMParser","parseFromString","index","findIndex","item","elm","querySelector","getAttribute","textContent","split","console","log","handleEtfsPerf","querySelectorAll","useEffect","configs","map","config","text","trim","Object","entries","key","value","upside","toFixed","handleStocks","handleEtfs","className","Date","toDateString","toLocaleTimeString","style","height","window","innerHeight","display","flexGrow","rows","checkboxSelection","getCellClassName","params","includes","Number","indexOf","onRowDoubleClick","event","alert","row","Ticker","Name","Price","DividendYield","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ae8a0269.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport rp from \"request-promise\";\r\nimport { DataGrid } from '@mui/x-data-grid';\r\nimport { makeStyles } from '@mui/styles';\r\nimport \"./App.css\";\r\n\r\n\r\n//const proxy = 'https://cors-anywhere.herokuapp.com/';  // unlock time period\r\n//const proxy = 'https://cors.bridged.cc/';   // api key\r\nconst proxy = 'https://api.allorigins.win/get?url=';    // data.contents\r\n//const proxy = 'https://api.codetabs.com/v1/proxy/?quest=';  // 5 calls per second\r\n\r\n\r\n\r\nconst columns = [\r\n  {\r\n    field: 'id',\r\n    headerName: 'ID',\r\n    sort: 'asc',\r\n  },\r\n  {\r\n    field: 'Ticker',\r\n    headerName: 'Ticker',\r\n    width: 150\r\n  },\r\n  {\r\n    field: 'Name',\r\n    headerName: 'Name',\r\n    type: 'name',\r\n    width: 175\r\n  },\r\n  {\r\n    field: 'Category',\r\n    headerName: 'Category',\r\n    type: 'category',\r\n    width: 150\r\n  },\r\n  {\r\n    field: 'Price',\r\n    headerName: 'Price',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: 'Change',\r\n    headerName: 'Change',\r\n  },\r\n  {\r\n    field: '52W-Low',\r\n    headerName: '52W-Low',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: '52W-High',\r\n    headerName: '52W-High',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: 'Volume',\r\n    headerName: 'Volume',\r\n    width: 175\r\n  },\r\n  {\r\n    field: 'Market-Cap',\r\n    headerName: 'Market-Cap',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: 'DividendYield',\r\n    headerName: 'DividendYield',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: 'Ex-Dividend-Date',\r\n    headerName: 'Ex-Dividend-Date',\r\n    type: 'date',\r\n  },\r\n  {\r\n    field: 'MER',\r\n    headerName: 'MER',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: 'Risk',\r\n    headerName: 'Risk',\r\n    width: 125\r\n  },\r\n  {\r\n    field: 'Return',\r\n    headerName: 'Return',\r\n    width: 125\r\n  },\r\n  {\r\n    field: 'Rating',\r\n    headerName: 'Rating'\r\n  },\r\n  {\r\n    field: 'Inception',\r\n    headerName: 'Inception',\r\n    type: 'date',\r\n    width: 150,\r\n  },\r\n  {\r\n    field: 'Assets',\r\n    headerName: 'Assets',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: 'DividendYield',\r\n    headerName: 'DividendYield',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: '5d-return',\r\n    headerName: '5d-return',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: '1m-return',\r\n    headerName: '1m-return',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: '3m-return',\r\n    headerName: '3m-return',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: '6m-return',\r\n    headerName: '6m-return',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: '1y-return',\r\n    headerName: '1y-return',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: '3y-return',\r\n    headerName: '3y-return',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: '5y-return',\r\n    headerName: '5y-return',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: '10y-return',\r\n    headerName: '10y-return',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: 'AP - Dec 2020',\r\n    headerName: 'Dec 2020',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: 'AP - Dec 2020 Upside',\r\n    headerName: 'Dec 2020 Upside',\r\n    width: 150,\r\n  },\r\n  {\r\n    field: 'AP - Jan 2021',\r\n    headerName: 'Jan 2021',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: 'AP - Jan 2021 Upside',\r\n    headerName: 'Jan 2021 Upside',\r\n    width: 150,\r\n  },\r\n  {\r\n    field: 'AP - Feb 2021',\r\n    headerName: 'Feb 2021',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: 'AP - Feb 2021 Upside',\r\n    headerName: 'Feb 2021 Upside',\r\n    width: 150,\r\n  },\r\n  {\r\n    field: 'AP - Mar 2021',\r\n    headerName: 'Mar 2021',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: 'AP - Mar 2021 Upside',\r\n    headerName: 'Mar 2021 Upside',\r\n    width: 150,\r\n  },\r\n  {\r\n    field: 'AP - Apr 2021',\r\n    headerName: 'Apr 2021',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: 'AP - Apr 2021 Upside',\r\n    headerName: 'Apr 2021 Upside',\r\n    width: 150,\r\n  },\r\n  {\r\n    field: 'AP - May 2021',\r\n    headerName: 'May 2021',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: 'AP - May 2021 Upside',\r\n    headerName: 'May 2021 Upside',\r\n    width: 150,\r\n  },\r\n  {\r\n    field: 'AP - Jun 2021',\r\n    headerName: 'Jun 2021',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: 'AP - Jun 2021 Upside',\r\n    headerName: 'Jun 2021 Upside',\r\n    width: 150,\r\n  },\r\n  {\r\n    field: 'AP - Aug 2021',\r\n    headerName: 'Aug 2021',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: 'AP - Aug 2021 Upside',\r\n    headerName: 'Aug 2021 Upside',\r\n    width: 150,\r\n  },\r\n  {\r\n    field: 'AP - Sep 2021',\r\n    headerName: 'Sep 2021',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: 'AP - Sep 2021 Upside',\r\n    headerName: 'Sep 2021 Upside',\r\n    width: 150,\r\n  },\r\n  {\r\n    field: 'AP - Oct 2021',\r\n    headerName: 'Oct 2021',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: 'AP - Oct 2021 Upside',\r\n    headerName: 'Oct 2021 Upside',\r\n    width: 150,\r\n  },\r\n  {\r\n    field: 'AP - Nov 2021',\r\n    headerName: 'Nov 2021',\r\n    type: 'number',\r\n  },\r\n  {\r\n    field: 'AP - Nov 2021 Upside',\r\n    headerName: 'Nov 2021 Upside',\r\n    width: 150,\r\n  },\r\n  // {\r\n  //   field: 'AP - xxx 2021',\r\n  //   headerName: 'xxx 2021',\r\n  //   type: 'number',\r\n  // },\r\n  // {\r\n  //   field: 'AP - xxx 2021 Upside',\r\n  //   headerName: 'xxx 2021 Upside',\r\n  //   width: 150,\r\n  // },\r\n\r\n];\r\n\r\n\r\nconst sampleData = [\r\n  {\r\n    \"id\": 100,\r\n    \"ticker\": \"TD\",\r\n    \"type\": \"stock\",\r\n    \"AP - Dec 2020\": \"68.77\",\r\n    \"AP - Jan 2021\": \"75\",\r\n    \"AP - Feb 2021\": \"82.2\",\r\n    \"AP - Mar 2021\": \"87.62\",\r\n    \"AP - Apr 2021\": \"86.5\",\r\n    \"AP - May 2021\": \"91.71\",\r\n    \"AP - Jun 2021\": \"91\",\r\n    \"AP - Aug 2021\": \"93\",\r\n  },\r\n\r\n  {\r\n    \"id\": 600,\r\n    \"ticker\": \"TSLA\",\r\n    \"type\": \"stock\",\r\n    \"country\": \"US\",\r\n    \"AP - Dec 2020\": \"501.29\",\r\n    \"AP - Jan 2021\": \"753\",\r\n    \"AP - Feb 2021\": \"670\",\r\n    \"AP - Mar 2021\": \"882\",\r\n    \"AP - Apr 2021\": \"800\",\r\n    \"AP - May 2021\": \"772\",\r\n    \"AP - Jun 2021\": \"800\",\r\n    \"AP - Aug 2021\": \"900\",\r\n    \"AP - Sep 2021\": \"862\",\r\n  },\r\n\r\n  {\r\n    \"id\": 700,\r\n    \"ticker\": \"XIU\",\r\n    \"type\": \"etf\"\r\n  },\r\n\r\n  {\r\n    \"id\": 1400,\r\n    \"ticker\": \"QQQ\",\r\n    \"type\": \"etf\",\r\n    \"country\": \"US\",\r\n  },\r\n]\r\n\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    '& .cold': {\r\n      backgroundColor: 'red',\r\n      color: 'white',\r\n    },\r\n    '& .hot': {\r\n      backgroundColor: 'green',\r\n      color: 'white',\r\n    },\r\n    sticky: {\r\n      position: \"sticky\",\r\n      left: 0,\r\n      background: \"white\",\r\n      boxShadow: \"5px 2px 5px grey\"\r\n    }\r\n  },\r\n});\r\n\r\nexport default function App() {\r\n  const classes = useStyles();\r\n  const [data, setData] = useState([]);\r\n  let localArr = [];\r\n\r\n  // read our data file in the public folder\r\n  const getConfig = new Promise((resolve, reject) => {\r\n    fetch('./data.json',\r\n      {\r\n        // headers: {\r\n        //   'Content-Type': 'application/json',\r\n        //   'Accept': 'application/json'\r\n        // }\r\n      }\r\n    )\r\n      .then(function (response) {\r\n        resolve(response.json());\r\n        //resolve(sampleData);\r\n      })\r\n      .catch(function (err) {\r\n        reject(Error(\"Get config failed\"));\r\n      });\r\n  });\r\n\r\n  // handle canadian stocks\r\n  const handleStocks = (props) => {\r\n    const ticker = props.ticker;\r\n    const country = props.country ? props.country : 'CAN';\r\n    let url = proxy + 'https://marketsandresearch.td.com/tdwca/Public/Stocks/Overview/ca/';\r\n    if (country === 'US') {\r\n      url = proxy + 'https://marketsandresearch.td.com/tdwca/Public/Stocks/Overview/us/';\r\n    }\r\n\r\n    rp(url + ticker)\r\n      .then(html => {\r\n        // Convert the HTML string into a document object\r\n        html = JSON.parse(html).contents; // for this proxy only\r\n        var parser = new DOMParser();\r\n        var doc = parser.parseFromString(html, 'text/html');\r\n        var elm = {};\r\n\r\n        //common\r\n        elm['id'] = props.id;\r\n        elm['Ticker'] = doc.querySelector(\".issueExchange\").textContent + doc.querySelector(\".issueSymbol\").textContent;\r\n        props['exchange'] = doc.querySelector(\".issueExchange\").textContent;\r\n        elm['Name'] = doc.querySelector(\".issueName\").textContent;\r\n        elm['Category'] = doc.querySelector(\".PeersModule a\").text.split('-')[0];\r\n        elm['Price'] = doc.querySelector(\".primary-data-content li div span\").textContent;\r\n        elm['Change'] = doc.querySelector(\".changePercent\").textContent.replace('(', '').replace(')', '').trim();\r\n        elm['52W-Low'] = doc.querySelectorAll(\"div[low]\")[1].getAttribute('low');\r\n        elm['52W-High'] = doc.querySelectorAll(\"div[low]\")[1].getAttribute('high');\r\n        elm['Volume'] = doc.querySelector('.volume-label ~ div').textContent;\r\n\r\n        //stocks\r\n        elm['Market-Cap'] = doc.querySelectorAll('.fundamentalsTable tr')[0].querySelectorAll('div')[1].textContent;\r\n        elm['DividendYield'] = doc.querySelectorAll('.fundamentalsTable tr')[3].querySelectorAll('div')[1].textContent;\r\n        elm['Ex-Dividend-Date'] = doc.querySelectorAll('.fundamentalsTable tr')[5].querySelectorAll('div')[1].textContent;\r\n\r\n        // loop through Analyst Prices\r\n        for (const [key, value] of Object.entries(props)) {\r\n          if (key.startsWith('AP')) {\r\n            elm[key] = value;\r\n          }\r\n          const upside = ((value / elm['Price']) - 1) * 100;\r\n          elm[key + ' Upside'] = upside.toFixed(2) + '%';\r\n        }\r\n\r\n        localArr = [...localArr, elm];\r\n        setData(localArr);\r\n        // setData(prevState => {\r\n        //   return {\r\n        //     ...localArr\r\n        //   };\r\n        // });\r\n\r\n        // more stock items\r\n        handlePerf(props);\r\n\r\n      })\r\n      .catch(function (err) {\r\n        console.log(\"Stocks failed\");\r\n      });\r\n\r\n  }\r\n\r\n  const handleEtfs = (props) => {\r\n    const ticker = props.ticker;\r\n    const country = props.country ? props.country : 'CAN';\r\n\r\n    let url = proxy + 'https://marketsandresearch.td.com/tdwca/Public/ETFsProfile/Summary/ca/';\r\n    if (country === 'US') {\r\n      url = proxy + 'https://marketsandresearch.td.com/tdwca/Public/ETFsProfile/Summary/us/';\r\n    }\r\n\r\n    rp(url + ticker)\r\n      .then(html => {\r\n        // Convert the HTML string into a document object\r\n        html = JSON.parse(html).contents; // for this proxy only\r\n        var parser = new DOMParser();\r\n        var doc = parser.parseFromString(html, 'text/html');\r\n        var elm = {};\r\n\r\n        //common\r\n        elm['id'] = props.id;\r\n        elm['Ticker'] = doc.querySelector(\".issueExchange\").textContent + doc.querySelector(\".issueSymbol\").textContent;\r\n        props['exchange'] = doc.querySelector(\".issueExchange\").textContent;\r\n        elm['Name'] = doc.querySelector(\".issueName\").textContent;\r\n        elm['Price'] = doc.querySelector(\".primary-data-content li div span\").textContent;\r\n        elm['Change'] = doc.querySelector(\".changePercent\").textContent.replace('(', '').replace(')', '').trim();\r\n        elm['52W-Low'] = doc.querySelectorAll(\"div[low]\")[1].getAttribute('low');\r\n        elm['52W-High'] = doc.querySelectorAll(\"div[low]\")[1].getAttribute('high');\r\n        elm['Volume'] = doc.querySelector('.volume-label ~ div').textContent;\r\n\r\n        //ETF's summary\r\n        elm['Rating'] = doc.querySelector('.secondary-data-content').querySelector('li:last-child').querySelector('.star-row').querySelectorAll('span')[10]?.textContent;\r\n        elm['Category'] = doc.querySelector('.topFundInfo').querySelectorAll('tr')[1].querySelector('span:last-child').textContent;\r\n        elm['Inception'] = doc.querySelector('.topFundInfo').querySelectorAll('tr')[3].querySelector('span:last-child').textContent;\r\n        elm['Assets'] = doc.querySelectorAll(\".FundProfileView table tr\")[5].querySelector('td')?.textContent;\r\n        elm['DividendYield'] = doc.querySelectorAll(\".FundProfileView table tr\")[10].querySelector('td')?.textContent;\r\n        elm['Ex-Dividend-Date'] = doc.querySelectorAll(\".FundProfileView table tr\")[12].querySelector('td')?.textContent;\r\n        elm['MER'] = doc.querySelectorAll(\".FundProfileView table tr\")[19].querySelector('td')?.textContent;\r\n\r\n        localArr = [...localArr, elm];\r\n        setData(localArr);\r\n        // setData(prevState => {\r\n        //   return {\r\n        //     ...localArr\r\n        //   };\r\n        // });\r\n\r\n        // more ETF items\r\n        handleEtfsPerf(props);\r\n\r\n      })\r\n      .catch(function (err) {\r\n        console.log(\"ETFs failed\");\r\n      });\r\n\r\n  }\r\n\r\n\r\n  const handlePerf = (props) => {\r\n    let ticker = props.ticker.replace(\".\", \"-\");\r\n\r\n    const country = props.country ? props.country : 'CAN';\r\n    const id = props.id;\r\n\r\n    let url = proxy + 'https://www.theglobeandmail.com/investing/markets/stocks/' + ticker + '-T/';\r\n    if (country === 'US') {\r\n      // the above url doesn't work well with US ETFs\r\n      if (props['type'] === 'etf') {\r\n        return;\r\n      }\r\n\r\n      if (props['exchange'].startsWith('NYSE')) {\r\n        ticker = ticker + '-N/';\r\n      }\r\n      else { //Nasdaq\r\n        ticker = ticker + '-Q/';\r\n      }\r\n      url = proxy + 'https://www.theglobeandmail.com/investing/markets/stocks/' + ticker;\r\n    }\r\n\r\n    rp(url)\r\n      .then(html => {\r\n        // Convert the HTML string into a document object\r\n        html = JSON.parse(html).contents; // for this proxy only\r\n        var parser = new DOMParser();\r\n        var doc = parser.parseFromString(html, 'text/html');\r\n\r\n        // find the correct item from array\r\n        const index = localArr.findIndex(item => item.id === id);\r\n        const elm = localArr[index];\r\n\r\n        //Sticks's performance\r\n        elm['5d-return'] = doc.querySelector('[name=\"percentChange5d\"]')?.getAttribute('value');\r\n        elm['1m-return'] = doc.querySelector('[headers=\"pricePerformanceData_period_1m pricePerformanceData_performance\"] span')?.textContent.split('(')[1].split(')')[0];\r\n        elm['3m-return'] = doc.querySelector('[headers=\"pricePerformanceData_period_3m pricePerformanceData_performance\"] span')?.textContent.split('(')[1].split(')')[0];\r\n        elm['1y-return'] = doc.querySelector('[name=\"return1y\"]')?.getAttribute('value');\r\n        elm['3y-return'] = doc.querySelector('[name=\"return3y\"]')?.getAttribute('value');\r\n        elm['5y-return'] = doc.querySelector('[name=\"return5y\"]')?.getAttribute('value');\r\n\r\n        // replace elm\r\n        //localArr[index] = elm;\r\n        setData(localArr);\r\n        // setData(prevState => {\r\n        //   return {\r\n        //     ...localArr\r\n        //   };\r\n        // });\r\n      })\r\n      .catch(function (err) {\r\n        console.log(\"Stocks Perf failed\");\r\n      });\r\n\r\n  };\r\n\r\n  const handleEtfsPerf = (props) => {\r\n    const ticker = props.ticker;\r\n    const country = props.country ? props.country : 'CAN';\r\n    const id = props.id;\r\n\r\n    let url = proxy + 'https://marketsandresearch.td.com/tdwca/Public/ETFsProfile/PerformanceAndRisk/ca/';\r\n    if (country === 'US') {\r\n      url = proxy + 'https://marketsandresearch.td.com/tdwca/Public/ETFsProfile/PerformanceAndRisk/us/';\r\n    }\r\n\r\n    rp(url + ticker)\r\n      .then(html => {\r\n        // Convert the HTML string into a document object\r\n        html = JSON.parse(html).contents; // for this proxy only\r\n        var parser = new DOMParser();\r\n        var doc = parser.parseFromString(html, 'text/html');\r\n\r\n        // find the correct item from array\r\n        const index = localArr.findIndex(item => item.id === id);\r\n        const elm = localArr[index];\r\n\r\n        //ETF's performance and risk\r\n        elm['Risk'] = doc.querySelectorAll(\".risk-rating\")[0]?.querySelector('.active').textContent;\r\n        elm['Return'] = doc.querySelectorAll(\".risk-rating\")[1]?.querySelector('.active').textContent;\r\n        elm['3m-return'] = doc.querySelectorAll(\".PerformanceOverTimeView table tr\")[1]?.querySelectorAll('div')[1].textContent;\r\n        elm['6m-return'] = doc.querySelectorAll(\".PerformanceOverTimeView table tr\")[1]?.querySelectorAll('div')[2].textContent;\r\n        elm['3y-return'] = doc.querySelectorAll(\".PerformanceOverTimeView table tr\")[1]?.querySelectorAll('div')[3].textContent;\r\n        elm['5y-return'] = doc.querySelectorAll(\".PerformanceOverTimeView table tr\")[1]?.querySelectorAll('div')[4].textContent;\r\n        elm['10y-return'] = doc.querySelectorAll(\".PerformanceOverTimeView table tr\")[1]?.querySelectorAll('div')[5].textContent;\r\n\r\n        // replace elm\r\n        //localArr[index] = elm;\r\n        setData(localArr);\r\n        // setData(prevState => {\r\n        //   return {\r\n        //     ...localArr\r\n        //   };\r\n        // });\r\n\r\n        handlePerf(props);\r\n      })\r\n      .catch(function (err) {\r\n        console.log(\"ETFs Perf failed\");\r\n      });\r\n\r\n  };\r\n\r\n  // this runs once at start up\r\n  useEffect(() => {\r\n\r\n    getConfig\r\n      .then(configs => {\r\n        // loop through values in config\r\n        configs.map((config) => {\r\n          if (config.type === 'stock') {\r\n            handleStocks(config);\r\n          } else {\r\n            handleEtfs(config);\r\n          }\r\n          return null;\r\n        })\r\n      })\r\n    // .finally(() => {\r\n    //   setData(localArr);\r\n    // });\r\n\r\n  }, []);\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <h1>Stocks</h1>\r\n      <h3>Last refreshed: {new Date().toDateString()} {new Date().toLocaleTimeString()}</h3>\r\n      <div style={{ height: window.innerHeight * 0.75, width: '100%' }}>\r\n        <div style={{ display: 'flex', height: '100%' }}>\r\n          <div style={{ flexGrow: 1 }}>\r\n            <DataGrid\r\n              rows={data}\r\n              columns={columns}\r\n              //pageSize={100}\r\n              //rowsPerPageOptions={[25, 50, 100]}\r\n              checkboxSelection\r\n              //disableSelectionOnClick\r\n              //loading\r\n              getCellClassName={(params) => {\r\n                if (params.field.includes(\"Upside\")) {\r\n                  return Number(params.value?.split('%')[0]) >= 5 ? 'hot' : null;\r\n                }\r\n                else if (params.field === 'Change') {\r\n                  return Number(params.value?.split('%')[0]) >= 0 ? 'hot' : 'cold';\r\n                }\r\n                else if (['5d-return','1m-return','3m-return','6m-return','1y-return','3y-return','5y-return','10y-return'].indexOf(params.field) !== -1) {\r\n                  return Number(params.value?.split('%')[0]) >= 2.5 ? 'hot' : null;\r\n                }                \r\n                else if (params.field === 'id') {\r\n                  return 'sticky';\r\n                }\r\n                else {\r\n                  return '';\r\n                }\r\n              }}\r\n              onRowDoubleClick={(params, event) => {\r\n                alert(`${params.row.Ticker} --> ${params.row.Name} --> ${params.row.Price} --> Div ${params.row.DividendYield}`);\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* {JSON.stringify(data)} */}\r\n    </div>\r\n  );\r\n}\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}