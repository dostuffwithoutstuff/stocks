(this.webpackJsonpstonks=this.webpackJsonpstonks||[]).push([[0],{357:function(e,t,r){},386:function(e,t){},388:function(e,t){},397:function(e,t){},399:function(e,t){},424:function(e,t){},426:function(e,t){},427:function(e,t){},432:function(e,t){},434:function(e,t){},440:function(e,t){},442:function(e,t){},461:function(e,t){},473:function(e,t){},476:function(e,t){},502:function(e,t){},620:function(e,t,r){},631:function(e,t,r){"use strict";r.r(t);var l=r(0),n=r.n(l),o=r(54),i=r.n(o),d=(r(357),r(16)),u=r(7),a=r(128),c=r.n(a),v=r(318),s=r(321),m=r(697),b=r(642),p=r(693),f=r(643),y=(r(620),r(621),r(622),r(2)),h="https://api.allorigins.win/get?url=",g=[{field:"id",headerName:"ID",sort:"asc",pinned:"left"},{field:"Ticker",headerName:"Ticker",width:150,pinned:"left"},{field:"Name",headerName:"Name",type:"name",width:175},{field:"Category",headerName:"Category",type:"category",width:150},{field:"Price",headerName:"Price",type:"number"},{field:"Change",headerName:"Change",cellStyle:function(e){var t,r;return Number(null===(t=e.value)||void 0===t?void 0:t.split("%")[0])>2.5?{backgroundColor:"green"}:Number(null===(r=e.value)||void 0===r?void 0:r.split("%")[0])<-2.5?{backgroundColor:"red"}:void 0}},{field:"52W-Low",headerName:"52W-Low",type:"number"},{field:"52W-High",headerName:"52W-High",type:"number"},{field:"Volume",headerName:"Volume",width:175},{field:"Market-Cap",headerName:"Market-Cap",type:"number"},{field:"DividendYield",headerName:"DividendYield",type:"number"},{field:"Ex-Dividend-Date",headerName:"Ex-Dividend-Date",type:"date"},{field:"MER",headerName:"MER",type:"number"},{field:"Risk",headerName:"Risk",width:125},{field:"Return",headerName:"Return",width:125},{field:"Rating",headerName:"Rating"},{field:"Inception",headerName:"Inception",type:"date",width:150},{field:"Assets",headerName:"Assets",type:"number"},{field:"DividendYield",headerName:"DividendYield",type:"number"},{field:"5d-return",headerName:"5d-return",type:"number",cellStyle:function(e){var t,r;return Number(null===(t=e.value)||void 0===t?void 0:t.split("%")[0])>2.5?{backgroundColor:"green"}:Number(null===(r=e.value)||void 0===r?void 0:r.split("%")[0])<-2.5?{backgroundColor:"red"}:void 0}},{field:"1m-return",headerName:"1m-return",type:"number",cellStyle:function(e){var t,r;return Number(null===(t=e.value)||void 0===t?void 0:t.split("%")[0])>2.5?{backgroundColor:"green"}:Number(null===(r=e.value)||void 0===r?void 0:r.split("%")[0])<-2.5?{backgroundColor:"red"}:void 0}},{field:"3m-return",headerName:"3m-return",type:"number",cellStyle:function(e){var t,r;return Number(null===(t=e.value)||void 0===t?void 0:t.split("%")[0])>2.5?{backgroundColor:"green"}:Number(null===(r=e.value)||void 0===r?void 0:r.split("%")[0])<-2.5?{backgroundColor:"red"}:void 0}},{field:"6m-return",headerName:"6m-return",type:"number",cellStyle:function(e){var t,r;return Number(null===(t=e.value)||void 0===t?void 0:t.split("%")[0])>2.5?{backgroundColor:"green"}:Number(null===(r=e.value)||void 0===r?void 0:r.split("%")[0])<-2.5?{backgroundColor:"red"}:void 0}},{field:"1y-return",headerName:"1y-return",type:"number",cellStyle:function(e){var t,r;return Number(null===(t=e.value)||void 0===t?void 0:t.split("%")[0])>2.5?{backgroundColor:"green"}:Number(null===(r=e.value)||void 0===r?void 0:r.split("%")[0])<-2.5?{backgroundColor:"red"}:void 0}},{field:"3y-return",headerName:"3y-return",type:"number",cellStyle:function(e){var t,r;return Number(null===(t=e.value)||void 0===t?void 0:t.split("%")[0])>5?{backgroundColor:"green"}:Number(null===(r=e.value)||void 0===r?void 0:r.split("%")[0])<-5?{backgroundColor:"red"}:void 0}},{field:"5y-return",headerName:"5y-return",type:"number",cellStyle:function(e){var t,r;return Number(null===(t=e.value)||void 0===t?void 0:t.split("%")[0])>10?{backgroundColor:"green"}:Number(null===(r=e.value)||void 0===r?void 0:r.split("%")[0])<-10?{backgroundColor:"red"}:void 0}},{field:"10y-return",headerName:"10y-return",type:"number",cellStyle:function(e){var t,r;return Number(null===(t=e.value)||void 0===t?void 0:t.split("%")[0])>15?{backgroundColor:"green"}:Number(null===(r=e.value)||void 0===r?void 0:r.split("%")[0])<-15?{backgroundColor:"red"}:void 0}},{field:"AP - Mar",headerName:"Mar",type:"number"},{field:"AP - Mar Upside",headerName:"Mar Upside",width:150,cellStyle:function(e){var t,r;return Number(null===(t=e.value)||void 0===t?void 0:t.split("%")[0])>2.5?{backgroundColor:"green"}:Number(null===(r=e.value)||void 0===r?void 0:r.split("%")[0])<-2.5?{backgroundColor:"red"}:void 0}},{field:"AP - Apr",headerName:"Apr",type:"number"},{field:"AP - Apr Upside",headerName:"Apr Upside",width:150,cellStyle:function(e){var t,r;return Number(null===(t=e.value)||void 0===t?void 0:t.split("%")[0])>2.5?{backgroundColor:"green"}:Number(null===(r=e.value)||void 0===r?void 0:r.split("%")[0])<-2.5?{backgroundColor:"red"}:void 0}},{field:"AP - May",headerName:"May",type:"number"},{field:"AP - May Upside",headerName:"May Upside",width:150,cellStyle:function(e){var t,r;return Number(null===(t=e.value)||void 0===t?void 0:t.split("%")[0])>2.5?{backgroundColor:"green"}:Number(null===(r=e.value)||void 0===r?void 0:r.split("%")[0])<-2.5?{backgroundColor:"red"}:void 0}},{field:"AP - Jun",headerName:"Jun",type:"number"},{field:"AP - Jun Upside",headerName:"Jun Upside",width:150,cellStyle:function(e){var t,r;return Number(null===(t=e.value)||void 0===t?void 0:t.split("%")[0])>2.5?{backgroundColor:"green"}:Number(null===(r=e.value)||void 0===r?void 0:r.split("%")[0])<-2.5?{backgroundColor:"red"}:void 0}},{field:"AP - Aug",headerName:"Aug",type:"number"},{field:"AP - Aug Upside",headerName:"Aug Upside",width:150,cellStyle:function(e){var t,r;return Number(null===(t=e.value)||void 0===t?void 0:t.split("%")[0])>2.5?{backgroundColor:"green"}:Number(null===(r=e.value)||void 0===r?void 0:r.split("%")[0])<-2.5?{backgroundColor:"red"}:void 0}},{field:"AP - Sep",headerName:"Sep",type:"number"},{field:"AP - Sep Upside",headerName:"Sep Upside",width:150,cellStyle:function(e){var t,r;return Number(null===(t=e.value)||void 0===t?void 0:t.split("%")[0])>2.5?{backgroundColor:"green"}:Number(null===(r=e.value)||void 0===r?void 0:r.split("%")[0])<-2.5?{backgroundColor:"red"}:void 0}},{field:"AP - Oct",headerName:"Oct",type:"number"},{field:"AP - Oct Upside",headerName:"Oct Upside",width:150,cellStyle:function(e){var t,r;return Number(null===(t=e.value)||void 0===t?void 0:t.split("%")[0])>2.5?{backgroundColor:"green"}:Number(null===(r=e.value)||void 0===r?void 0:r.split("%")[0])<-2.5?{backgroundColor:"red"}:void 0}},{field:"AP - Nov",headerName:"Nov",type:"number"},{field:"AP - Nov Upside",headerName:"Nov Upside",width:150,cellStyle:function(e){var t,r;return Number(null===(t=e.value)||void 0===t?void 0:t.split("%")[0])>2.5?{backgroundColor:"green"}:Number(null===(r=e.value)||void 0===r?void 0:r.split("%")[0])<-2.5?{backgroundColor:"red"}:void 0}},{field:"AP - Dec",headerName:"Dec",type:"number"},{field:"AP - Dec Upside",headerName:"Dec Upside",width:150,cellStyle:function(e){var t,r;return Number(null===(t=e.value)||void 0===t?void 0:t.split("%")[0])>2.5?{backgroundColor:"green"}:Number(null===(r=e.value)||void 0===r?void 0:r.split("%")[0])<-2.5?{backgroundColor:"red"}:void 0}},{field:"AP - Jan",headerName:"Jan",type:"number"},{field:"AP - Jan Upside",headerName:"Jan Upside",width:150,cellStyle:function(e){var t,r;return Number(null===(t=e.value)||void 0===t?void 0:t.split("%")[0])>2.5?{backgroundColor:"green"}:Number(null===(r=e.value)||void 0===r?void 0:r.split("%")[0])<-2.5?{backgroundColor:"red"}:void 0}},{field:"AP - Feb",headerName:"Feb",type:"number"},{field:"AP - Feb Upside",headerName:"Feb Upside",width:150,cellStyle:function(e){var t,r;return Number(null===(t=e.value)||void 0===t?void 0:t.split("%")[0])>2.5?{backgroundColor:"green"}:Number(null===(r=e.value)||void 0===r?void 0:r.split("%")[0])<-2.5?{backgroundColor:"red"}:void 0}}],S=Object(m.a)({root:{"& .cold":{backgroundColor:"red",color:"white"},"& .hot":{backgroundColor:"green",color:"white"},sticky:{position:"sticky",left:0,background:"white",boxShadow:"5px 2px 5px grey"}}});function N(){var e=S(),t=Object(l.useState)([]),r=Object(u.a)(t,2),n=r[0],o=r[1],i=Object(l.useState)([]),a=Object(u.a)(i,2),m=a[0],N=a[1],C=[],k=[],w=new Promise((function(e,t){fetch("./data.json",{}).then((function(t){e(t.json())})).catch((function(e){t(Error("Get config failed"))}))})),x=function(e){var t=e.ticker.replace(".","-"),r=e.country?e.country:"CAN",l=e.id,i=h+"https://www.theglobeandmail.com/investing/markets/stocks/"+t+"-T/";if("US"===r){if("etf"===e.type)return;e.exchange.startsWith("NYSE")?t+="-N/":t+="-Q/",i=h+"https://www.theglobeandmail.com/investing/markets/stocks/"+t}C=[].concat(Object(d.a)(n),[t]),o(C),c()(i).then((function(t){var r,i,d,u;C=n.filter((function(e){return 2!=e})),o(C),t=JSON.parse(t).contents;var a,c,v,s=(new DOMParser).parseFromString(t,"text/html"),m=k.findIndex((function(e){return e.id===l})),b=k[m];(b["5d-return"]=null===(r=s.querySelector('[name="percentChange5d"]'))||void 0===r?void 0:r.getAttribute("value"),b["1m-return"]=null===(i=s.querySelector('[headers="pricePerformanceData_period_1m pricePerformanceData_performance"] span'))||void 0===i?void 0:i.textContent.split("(")[1].split(")")[0],b["3m-return"]=null===(d=s.querySelector('[headers="pricePerformanceData_period_3m pricePerformanceData_performance"] span'))||void 0===d?void 0:d.textContent.split("(")[1].split(")")[0],b["1y-return"]=null===(u=s.querySelector('[name="return1y"]'))||void 0===u?void 0:u.getAttribute("value"),"stock"===e.type)?(b["3y-return"]=null===(a=s.querySelector('[name="return3y"]'))||void 0===a?void 0:a.getAttribute("value"),b["5y-return"]=null===(c=s.querySelector('[name="return5y"]'))||void 0===c?void 0:c.getAttribute("value")):b["1y-return"]=null===(v=s.querySelectorAll(".performancePrice")[2])||void 0===v?void 0:v.textContent.split("(").pop().split(")")[0];N(k)})).catch((function(e){console.log("Stocks Perf failed")}))},A=function(e){var t=e.ticker,r=e.country?e.country:"CAN",l=e.id,i=h+"https://marketsandresearch.td.com/tdwca/Public/ETFsProfile/PerformanceAndRisk/ca/";"US"===r&&(i=h+"https://marketsandresearch.td.com/tdwca/Public/ETFsProfile/PerformanceAndRisk/us/"),C=[].concat(Object(d.a)(n),[t]),o(C),c()(i+t).then((function(t){var r,i,d,u,a,c,v;C=n.filter((function(e){return 2!=e})),o(C),t=JSON.parse(t).contents;var s=(new DOMParser).parseFromString(t,"text/html"),m=k.findIndex((function(e){return e.id===l})),b=k[m];b.Risk=null===(r=s.querySelectorAll(".risk-rating")[0])||void 0===r?void 0:r.querySelector(".active").textContent,b.Return=null===(i=s.querySelectorAll(".risk-rating")[1])||void 0===i?void 0:i.querySelector(".active").textContent,b["3m-return"]=null===(d=s.querySelectorAll(".PerformanceOverTimeView table tr")[1])||void 0===d?void 0:d.querySelectorAll("div")[1].textContent,b["6m-return"]=null===(u=s.querySelectorAll(".PerformanceOverTimeView table tr")[1])||void 0===u?void 0:u.querySelectorAll("div")[2].textContent,b["3y-return"]=null===(a=s.querySelectorAll(".PerformanceOverTimeView table tr")[1])||void 0===a?void 0:a.querySelectorAll("div")[3].textContent,b["5y-return"]=null===(c=s.querySelectorAll(".PerformanceOverTimeView table tr")[1])||void 0===c?void 0:c.querySelectorAll("div")[4].textContent,b["10y-return"]=null===(v=s.querySelectorAll(".PerformanceOverTimeView table tr")[1])||void 0===v?void 0:v.querySelectorAll("div")[5].textContent,N(k),x(e)})).catch((function(e){console.log("ETFs Perf failed")}))};return Object(l.useEffect)((function(){w.then((function(e){e.map((function(e){return"stock"===e.type?function(e){var t=e.ticker,r=e.country?e.country:"CAN",l=h+"https://marketsandresearch.td.com/tdwca/Public/Stocks/Overview/ca/";"US"===r&&(l=h+"https://marketsandresearch.td.com/tdwca/Public/Stocks/Overview/us/"),C=[].concat(Object(d.a)(n),[t]),o(C),c()(l+t).then((function(t){C=n.filter((function(e){return 2!=e})),o(C),t=JSON.parse(t).contents;var r=(new DOMParser).parseFromString(t,"text/html"),l={};l.id=e.id,l.Ticker=r.querySelector(".issueExchange").textContent+r.querySelector(".issueSymbol").textContent,e.exchange=r.querySelector(".issueExchange").textContent,l.Name=r.querySelector(".issueName").textContent,l.Category=r.querySelector(".PeersModule a").text.split("-")[0],l.Price=r.querySelector(".primary-data-content li div span").textContent,l.Change=r.querySelector(".changePercent").textContent.replace("(","").replace(")","").trim(),l["52W-Low"]=r.querySelectorAll("div[low]")[1].getAttribute("low"),l["52W-High"]=r.querySelectorAll("div[low]")[1].getAttribute("high"),l.Volume=r.querySelector(".volume-label ~ div").textContent,l["Market-Cap"]=r.querySelectorAll(".fundamentalsTable tr")[0].querySelectorAll("div")[1].textContent,l.DividendYield=r.querySelectorAll(".fundamentalsTable tr")[3].querySelectorAll("div")[1].textContent,l["Ex-Dividend-Date"]=r.querySelectorAll(".fundamentalsTable tr")[5].querySelectorAll("div")[1].textContent,l.Rating=e.rating;for(var i=0,a=Object.entries(e);i<a.length;i++){var c=Object(u.a)(a[i],2),v=c[0],s=c[1];v.startsWith("AP")&&(l[v]=s);var m=100*(s/l.Price.replace(",","")-1);l[v+" Upside"]=m.toFixed(2)+"%"}k=[].concat(Object(d.a)(k),[l]),N(k),x(e)})).catch((function(e){console.log("Stocks failed")}))}(e):function(e){var t=e.ticker,r=e.country?e.country:"CAN",l=h+"https://marketsandresearch.td.com/tdwca/Public/ETFsProfile/Summary/ca/";"US"===r&&(l=h+"https://marketsandresearch.td.com/tdwca/Public/ETFsProfile/Summary/us/"),C=[].concat(Object(d.a)(n),[t]),o(C),c()(l+t).then((function(t){var r,l,i,u,a;C=n.filter((function(e){return 2!=e})),o(C),t=JSON.parse(t).contents;var c=(new DOMParser).parseFromString(t,"text/html"),v={};v.id=e.id,v.Ticker=c.querySelector(".issueExchange").textContent+c.querySelector(".issueSymbol").textContent,e.exchange=c.querySelector(".issueExchange").textContent,v.Name=c.querySelector(".issueName").textContent,v.Price=c.querySelector(".primary-data-content li div span").textContent,v.Change=c.querySelector(".changePercent").textContent.replace("(","").replace(")","").trim(),v["52W-Low"]=c.querySelectorAll("div[low]")[1].getAttribute("low"),v["52W-High"]=c.querySelectorAll("div[low]")[1].getAttribute("high"),v.Volume=c.querySelector(".volume-label ~ div").textContent,v.Rating=null===(r=c.querySelector(".secondary-data-content").querySelector("li:last-child").querySelector(".star-row").querySelectorAll("span")[10])||void 0===r?void 0:r.textContent,v.Category=c.querySelector(".topFundInfo").querySelectorAll("tr")[1].querySelector("span:last-child").textContent,v.Inception=c.querySelector(".topFundInfo").querySelectorAll("tr")[3].querySelector("span:last-child").textContent,v.Assets=null===(l=c.querySelectorAll(".FundProfileView table tr")[5].querySelector("td"))||void 0===l?void 0:l.textContent,v.DividendYield=null===(i=c.querySelectorAll(".FundProfileView table tr")[10].querySelector("td"))||void 0===i?void 0:i.textContent,v["Ex-Dividend-Date"]=null===(u=c.querySelectorAll(".FundProfileView table tr")[12].querySelector("td"))||void 0===u?void 0:u.textContent,v.MER=null===(a=c.querySelectorAll(".FundProfileView table tr")[19].querySelector("td"))||void 0===a?void 0:a.textContent,k=[].concat(Object(d.a)(k),[v]),N(k),A(e)})).catch((function(e){console.log("ETFs failed")}))}(e),null}))}))}),[]),Object(y.jsxs)("div",{className:e.root,children:[Object(y.jsx)("h1",{children:"Stocks"}),Object(y.jsxs)("h3",{children:["Last refreshed: ",(new Date).toDateString()," ",(new Date).toLocaleTimeString()]}),Object(y.jsx)(b.a,{sx:{height:40},children:Object(y.jsx)(p.a,{in:n.length>0,style:{transitionDelay:n.length>0?"800ms":"0ms"},children:Object(y.jsx)(f.a,{})})}),Object(y.jsx)("div",{style:{height:.75*window.innerHeight,width:"100%"},children:Object(y.jsx)("div",{style:{display:"flex",height:"100%"},children:Object(y.jsx)("div",{style:{flexGrow:1},children:Object(y.jsx)(s.a,{rows:m,columns:g,checkboxSelection:!0,getCellClassName:function(e){var t,r,l,n;return e.field.includes("Upside")?Number(null===(t=e.value)||void 0===t?void 0:t.split("%")[0])>=5?"hot":null:"Change"===e.field?Number(null===(r=e.value)||void 0===r?void 0:r.split("%")[0])>=0?"hot":"cold":-1===["5d-return","1m-return","3m-return","6m-return","1y-return","3y-return","5y-return","10y-return"].indexOf(e.field)?"id"===e.field?"sticky":"":Number(null===(l=e.value)||void 0===l?void 0:l.split("%")[0])>=2.5?"hot":Number(null===(n=e.value)||void 0===n?void 0:n.split("%")[0])<=-2.5?"cold":void 0},onRowDoubleClick:function(e,t){alert("".concat(e.row.Ticker," --\x3e ").concat(e.row.Name," --\x3e ").concat(e.row.Price," --\x3e Div ").concat(e.row.DividendYield))}})})})}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)("div",{className:"ag-theme-alpine",style:{height:1.5*window.innerHeight,width:"100%"},children:Object(y.jsx)(v.AgGridReact,{rowData:m,columnDefs:g.map((function(e){return{field:e.field,pinned:e.pinned,cellStyle:e.cellStyle,sortable:!0,filter:!0}})),rowSelection:"multiple",rowMultiSelectWithClick:!0})})]})}var C=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,702)).then((function(t){var r=t.getCLS,l=t.getFID,n=t.getFCP,o=t.getLCP,i=t.getTTFB;r(e),l(e),n(e),o(e),i(e)}))};i.a.render(Object(y.jsx)(n.a.StrictMode,{children:Object(y.jsx)(N,{})}),document.getElementById("root")),C()}},[[631,1,2]]]);
//# sourceMappingURL=main.c756d6dc.chunk.js.map