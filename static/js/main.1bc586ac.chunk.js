(this.webpackJsonpstonks=this.webpackJsonpstonks||[]).push([[0],{341:function(e,t,r){},370:function(e,t){},372:function(e,t){},381:function(e,t){},383:function(e,t){},408:function(e,t){},410:function(e,t){},411:function(e,t){},416:function(e,t){},418:function(e,t){},424:function(e,t){},426:function(e,t){},445:function(e,t){},457:function(e,t){},460:function(e,t){},486:function(e,t){},582:function(e,t,r){},591:function(e,t,r){"use strict";r.r(t);var n=r(0),i=r.n(n),l=r(75),o=r.n(l),a=(r(341),r(16)),d=r(7),c=r(123),u=r.n(c),s=r(305),m=r(657),h=r(602),y=r(653),f=r(603),p=(r(582),r(2)),v="https://api.allorigins.win/get?url=",b=[{field:"id",headerName:"ID",sort:"asc"},{field:"Ticker",headerName:"Ticker",width:150},{field:"Name",headerName:"Name",type:"name",width:175},{field:"Category",headerName:"Category",type:"category",width:150},{field:"Price",headerName:"Price",type:"number"},{field:"Change",headerName:"Change"},{field:"52W-Low",headerName:"52W-Low",type:"number"},{field:"52W-High",headerName:"52W-High",type:"number"},{field:"Volume",headerName:"Volume",width:175},{field:"Market-Cap",headerName:"Market-Cap",type:"number"},{field:"DividendYield",headerName:"DividendYield",type:"number"},{field:"Ex-Dividend-Date",headerName:"Ex-Dividend-Date",type:"date"},{field:"MER",headerName:"MER",type:"number"},{field:"Risk",headerName:"Risk",width:125},{field:"Return",headerName:"Return",width:125},{field:"Rating",headerName:"Rating"},{field:"Inception",headerName:"Inception",type:"date",width:150},{field:"Assets",headerName:"Assets",type:"number"},{field:"DividendYield",headerName:"DividendYield",type:"number"},{field:"5d-return",headerName:"5d-return",type:"number"},{field:"1m-return",headerName:"1m-return",type:"number"},{field:"3m-return",headerName:"3m-return",type:"number"},{field:"6m-return",headerName:"6m-return",type:"number"},{field:"1y-return",headerName:"1y-return",type:"number"},{field:"3y-return",headerName:"3y-return",type:"number"},{field:"5y-return",headerName:"5y-return",type:"number"},{field:"10y-return",headerName:"10y-return",type:"number"},{field:"AP - Feb",headerName:"Feb",type:"number"},{field:"AP - Feb Upside",headerName:"Feb Upside",width:150},{field:"AP - Mar",headerName:"Mar",type:"number"},{field:"AP - Mar Upside",headerName:"Mar Upside",width:150},{field:"AP - Apr",headerName:"Apr",type:"number"},{field:"AP - Apr Upside",headerName:"Apr Upside",width:150},{field:"AP - May",headerName:"May",type:"number"},{field:"AP - May Upside",headerName:"May Upside",width:150},{field:"AP - Jun",headerName:"Jun",type:"number"},{field:"AP - Jun Upside",headerName:"Jun Upside",width:150},{field:"AP - Aug",headerName:"Aug",type:"number"},{field:"AP - Aug Upside",headerName:"Aug Upside",width:150},{field:"AP - Sep",headerName:"Sep",type:"number"},{field:"AP - Sep Upside",headerName:"Sep Upside",width:150},{field:"AP - Oct",headerName:"Oct",type:"number"},{field:"AP - Oct Upside",headerName:"Oct Upside",width:150},{field:"AP - Nov",headerName:"Nov",type:"number"},{field:"AP - Nov Upside",headerName:"Nov Upside",width:150},{field:"AP - Dec",headerName:"Dec",type:"number"},{field:"AP - Dec Upside",headerName:"Dec Upside",width:150},{field:"AP - Jan",headerName:"Jan",type:"number"},{field:"AP - Jan Upside",headerName:"Jan Upside",width:150}],S=Object(m.a)({root:{"& .cold":{backgroundColor:"red",color:"white"},"& .hot":{backgroundColor:"green",color:"white"},sticky:{position:"sticky",left:0,background:"white",boxShadow:"5px 2px 5px grey"}}});function g(){var e=S(),t=Object(n.useState)([]),r=Object(d.a)(t,2),i=r[0],l=r[1],o=Object(n.useState)([]),c=Object(d.a)(o,2),m=c[0],g=c[1],A=[],x=[],w=new Promise((function(e,t){fetch("./data.json",{}).then((function(t){e(t.json())})).catch((function(e){t(Error("Get config failed"))}))})),N=function(e){var t=e.ticker.replace(".","-"),r=e.country?e.country:"CAN",n=e.id,o=v+"https://www.theglobeandmail.com/investing/markets/stocks/"+t+"-T/";if("US"===r){if("etf"===e.type)return;e.exchange.startsWith("NYSE")?t+="-N/":t+="-Q/",o=v+"https://www.theglobeandmail.com/investing/markets/stocks/"+t}A=[].concat(Object(a.a)(i),[t]),l(A),u()(o).then((function(t){var r,o,a,d;A=i.filter((function(e){return 2!=e})),l(A),t=JSON.parse(t).contents;var c,u,s,m=(new DOMParser).parseFromString(t,"text/html"),h=x.findIndex((function(e){return e.id===n})),y=x[h];(y["5d-return"]=null===(r=m.querySelector('[name="percentChange5d"]'))||void 0===r?void 0:r.getAttribute("value"),y["1m-return"]=null===(o=m.querySelector('[headers="pricePerformanceData_period_1m pricePerformanceData_performance"] span'))||void 0===o?void 0:o.textContent.split("(")[1].split(")")[0],y["3m-return"]=null===(a=m.querySelector('[headers="pricePerformanceData_period_3m pricePerformanceData_performance"] span'))||void 0===a?void 0:a.textContent.split("(")[1].split(")")[0],y["1y-return"]=null===(d=m.querySelector('[name="return1y"]'))||void 0===d?void 0:d.getAttribute("value"),"stock"===e.type)?(y["3y-return"]=null===(c=m.querySelector('[name="return3y"]'))||void 0===c?void 0:c.getAttribute("value"),y["5y-return"]=null===(u=m.querySelector('[name="return5y"]'))||void 0===u?void 0:u.getAttribute("value")):y["1y-return"]=null===(s=m.querySelectorAll(".performancePrice")[2])||void 0===s?void 0:s.textContent.split("(").pop().split(")")[0];g(x)})).catch((function(e){console.log("Stocks Perf failed")}))},P=function(e){var t=e.ticker,r=e.country?e.country:"CAN",n=e.id,o=v+"https://marketsandresearch.td.com/tdwca/Public/ETFsProfile/PerformanceAndRisk/ca/";"US"===r&&(o=v+"https://marketsandresearch.td.com/tdwca/Public/ETFsProfile/PerformanceAndRisk/us/"),A=[].concat(Object(a.a)(i),[t]),l(A),u()(o+t).then((function(t){var r,o,a,d,c,u,s;A=i.filter((function(e){return 2!=e})),l(A),t=JSON.parse(t).contents;var m=(new DOMParser).parseFromString(t,"text/html"),h=x.findIndex((function(e){return e.id===n})),y=x[h];y.Risk=null===(r=m.querySelectorAll(".risk-rating")[0])||void 0===r?void 0:r.querySelector(".active").textContent,y.Return=null===(o=m.querySelectorAll(".risk-rating")[1])||void 0===o?void 0:o.querySelector(".active").textContent,y["3m-return"]=null===(a=m.querySelectorAll(".PerformanceOverTimeView table tr")[1])||void 0===a?void 0:a.querySelectorAll("div")[1].textContent,y["6m-return"]=null===(d=m.querySelectorAll(".PerformanceOverTimeView table tr")[1])||void 0===d?void 0:d.querySelectorAll("div")[2].textContent,y["3y-return"]=null===(c=m.querySelectorAll(".PerformanceOverTimeView table tr")[1])||void 0===c?void 0:c.querySelectorAll("div")[3].textContent,y["5y-return"]=null===(u=m.querySelectorAll(".PerformanceOverTimeView table tr")[1])||void 0===u?void 0:u.querySelectorAll("div")[4].textContent,y["10y-return"]=null===(s=m.querySelectorAll(".PerformanceOverTimeView table tr")[1])||void 0===s?void 0:s.querySelectorAll("div")[5].textContent,g(x),N(e)})).catch((function(e){console.log("ETFs Perf failed")}))};return Object(n.useEffect)((function(){w.then((function(e){e.map((function(e){return"stock"===e.type?function(e){var t=e.ticker,r=e.country?e.country:"CAN",n=v+"https://marketsandresearch.td.com/tdwca/Public/Stocks/Overview/ca/";"US"===r&&(n=v+"https://marketsandresearch.td.com/tdwca/Public/Stocks/Overview/us/"),A=[].concat(Object(a.a)(i),[t]),l(A),u()(n+t).then((function(t){A=i.filter((function(e){return 2!=e})),l(A),t=JSON.parse(t).contents;var r=(new DOMParser).parseFromString(t,"text/html"),n={};n.id=e.id,n.Ticker=r.querySelector(".issueExchange").textContent+r.querySelector(".issueSymbol").textContent,e.exchange=r.querySelector(".issueExchange").textContent,n.Name=r.querySelector(".issueName").textContent,n.Category=r.querySelector(".PeersModule a").text.split("-")[0],n.Price=r.querySelector(".primary-data-content li div span").textContent,n.Change=r.querySelector(".changePercent").textContent.replace("(","").replace(")","").trim(),n["52W-Low"]=r.querySelectorAll("div[low]")[1].getAttribute("low"),n["52W-High"]=r.querySelectorAll("div[low]")[1].getAttribute("high"),n.Volume=r.querySelector(".volume-label ~ div").textContent,n["Market-Cap"]=r.querySelectorAll(".fundamentalsTable tr")[0].querySelectorAll("div")[1].textContent,n.DividendYield=r.querySelectorAll(".fundamentalsTable tr")[3].querySelectorAll("div")[1].textContent,n["Ex-Dividend-Date"]=r.querySelectorAll(".fundamentalsTable tr")[5].querySelectorAll("div")[1].textContent,n.Rating=e.rating;for(var o=0,c=Object.entries(e);o<c.length;o++){var u=Object(d.a)(c[o],2),s=u[0],m=u[1];s.startsWith("AP")&&(n[s]=m);var h=100*(m/n.Price.replace(",","")-1);n[s+" Upside"]=h.toFixed(2)+"%"}x=[].concat(Object(a.a)(x),[n]),g(x),N(e)})).catch((function(e){console.log("Stocks failed")}))}(e):function(e){var t=e.ticker,r=e.country?e.country:"CAN",n=v+"https://marketsandresearch.td.com/tdwca/Public/ETFsProfile/Summary/ca/";"US"===r&&(n=v+"https://marketsandresearch.td.com/tdwca/Public/ETFsProfile/Summary/us/"),A=[].concat(Object(a.a)(i),[t]),l(A),u()(n+t).then((function(t){var r,n,o,d,c;A=i.filter((function(e){return 2!=e})),l(A),t=JSON.parse(t).contents;var u=(new DOMParser).parseFromString(t,"text/html"),s={};s.id=e.id,s.Ticker=u.querySelector(".issueExchange").textContent+u.querySelector(".issueSymbol").textContent,e.exchange=u.querySelector(".issueExchange").textContent,s.Name=u.querySelector(".issueName").textContent,s.Price=u.querySelector(".primary-data-content li div span").textContent,s.Change=u.querySelector(".changePercent").textContent.replace("(","").replace(")","").trim(),s["52W-Low"]=u.querySelectorAll("div[low]")[1].getAttribute("low"),s["52W-High"]=u.querySelectorAll("div[low]")[1].getAttribute("high"),s.Volume=u.querySelector(".volume-label ~ div").textContent,s.Rating=null===(r=u.querySelector(".secondary-data-content").querySelector("li:last-child").querySelector(".star-row").querySelectorAll("span")[10])||void 0===r?void 0:r.textContent,s.Category=u.querySelector(".topFundInfo").querySelectorAll("tr")[1].querySelector("span:last-child").textContent,s.Inception=u.querySelector(".topFundInfo").querySelectorAll("tr")[3].querySelector("span:last-child").textContent,s.Assets=null===(n=u.querySelectorAll(".FundProfileView table tr")[5].querySelector("td"))||void 0===n?void 0:n.textContent,s.DividendYield=null===(o=u.querySelectorAll(".FundProfileView table tr")[10].querySelector("td"))||void 0===o?void 0:o.textContent,s["Ex-Dividend-Date"]=null===(d=u.querySelectorAll(".FundProfileView table tr")[12].querySelector("td"))||void 0===d?void 0:d.textContent,s.MER=null===(c=u.querySelectorAll(".FundProfileView table tr")[19].querySelector("td"))||void 0===c?void 0:c.textContent,x=[].concat(Object(a.a)(x),[s]),g(x),P(e)})).catch((function(e){console.log("ETFs failed")}))}(e),null}))}))}),[]),Object(p.jsxs)("div",{className:e.root,children:[Object(p.jsx)("h1",{children:"Stocks"}),Object(p.jsxs)("h3",{children:["Last refreshed: ",(new Date).toDateString()," ",(new Date).toLocaleTimeString()]}),Object(p.jsx)(h.a,{sx:{height:40},children:Object(p.jsx)(y.a,{in:i.length>0,style:{transitionDelay:i.length>0?"800ms":"0ms"},children:Object(p.jsx)(f.a,{})})}),Object(p.jsx)("div",{style:{height:.75*window.innerHeight,width:"100%"},children:Object(p.jsx)("div",{style:{display:"flex",height:"100%"},children:Object(p.jsx)("div",{style:{flexGrow:1},children:Object(p.jsx)(s.a,{rows:m,columns:b,checkboxSelection:!0,getCellClassName:function(e){var t,r,n,i;return e.field.includes("Upside")?Number(null===(t=e.value)||void 0===t?void 0:t.split("%")[0])>=5?"hot":null:"Change"===e.field?Number(null===(r=e.value)||void 0===r?void 0:r.split("%")[0])>=0?"hot":"cold":-1===["5d-return","1m-return","3m-return","6m-return","1y-return","3y-return","5y-return","10y-return"].indexOf(e.field)?"id"===e.field?"sticky":"":Number(null===(n=e.value)||void 0===n?void 0:n.split("%")[0])>=2.5?"hot":Number(null===(i=e.value)||void 0===i?void 0:i.split("%")[0])<=-2.5?"cold":void 0},onRowDoubleClick:function(e,t){alert("".concat(e.row.Ticker," --\x3e ").concat(e.row.Name," --\x3e ").concat(e.row.Price," --\x3e Div ").concat(e.row.DividendYield))}})})})})]})}var A=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,662)).then((function(t){var r=t.getCLS,n=t.getFID,i=t.getFCP,l=t.getLCP,o=t.getTTFB;r(e),n(e),i(e),l(e),o(e)}))};o.a.render(Object(p.jsx)(i.a.StrictMode,{children:Object(p.jsx)(g,{})}),document.getElementById("root")),A()}},[[591,1,2]]]);
//# sourceMappingURL=main.1bc586ac.chunk.js.map