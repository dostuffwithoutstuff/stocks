(this.webpackJsonpstonks=this.webpackJsonpstonks||[]).push([[0],{318:function(e,t,r){},347:function(e,t){},349:function(e,t){},358:function(e,t){},360:function(e,t){},385:function(e,t){},387:function(e,t){},388:function(e,t){},393:function(e,t){},395:function(e,t){},401:function(e,t){},403:function(e,t){},422:function(e,t){},434:function(e,t){},437:function(e,t){},463:function(e,t){},559:function(e,t,r){},567:function(e,t,r){"use strict";r.r(t);var n=r(0),i=r.n(n),l=r(68),a=r.n(l),o=(r(318),r(19)),d=r(8),c=r(115),u=r.n(c),s=r(290),m=r(43),h=(r(559),r(2)),y="https://api.allorigins.win/get?url=",f=[{field:"id",headerName:"ID",sort:"asc"},{field:"Ticker",headerName:"Ticker",width:150},{field:"Name",headerName:"Name",type:"name",width:175},{field:"Category",headerName:"Category",type:"category",width:150},{field:"Price",headerName:"Price",type:"number"},{field:"Change",headerName:"Change"},{field:"52W-Low",headerName:"52W-Low",type:"number"},{field:"52W-High",headerName:"52W-High",type:"number"},{field:"Volume",headerName:"Volume",width:175},{field:"Market-Cap",headerName:"Market-Cap",type:"number"},{field:"Dividend-Yield",headerName:"Dividend-Yield",type:"number"},{field:"Ex-Dividend-Date",headerName:"Ex-Dividend-Date",type:"date"},{field:"MER",headerName:"MER",type:"number"},{field:"Risk",headerName:"Risk",width:125},{field:"Return",headerName:"Return",width:125},{field:"Rating",headerName:"Rating"},{field:"Inception",headerName:"Inception",type:"date",width:150},{field:"Assets",headerName:"Assets",type:"number"},{field:"Dividend-Yield",headerName:"Dividend-Yield",type:"number"},{field:"5d-return",headerName:"5d-return",type:"number"},{field:"1m-return",headerName:"1m-return",type:"number"},{field:"3m-return",headerName:"3m-return",type:"number"},{field:"6m-return",headerName:"6m-return",type:"number"},{field:"1y-return",headerName:"1y-return",type:"number"},{field:"3y-return",headerName:"3y-return",type:"number"},{field:"5y-return",headerName:"5y-return",type:"number"},{field:"10y-return",headerName:"10y-return",type:"number"},{field:"AP - Dec 2020",headerName:"Dec 2020",type:"number"},{field:"AP - Dec 2020 Upside",headerName:"Dec 2020 Upside",width:150},{field:"AP - Jan 2021",headerName:"Jan 2021",type:"number"},{field:"AP - Jan 2021 Upside",headerName:"Jan 2021 Upside",width:150},{field:"AP - Feb 2021",headerName:"Feb 2021",type:"number"},{field:"AP - Feb 2021 Upside",headerName:"Feb 2021 Upside",width:150},{field:"AP - Mar 2021",headerName:"Mar 2021",type:"number"},{field:"AP - Mar 2021 Upside",headerName:"Mar 2021 Upside",width:150},{field:"AP - Apr 2021",headerName:"Apr 2021",type:"number"},{field:"AP - Apr 2021 Upside",headerName:"Apr 2021 Upside",width:150},{field:"AP - May 2021",headerName:"May 2021",type:"number"},{field:"AP - May 2021 Upside",headerName:"May 2021 Upside",width:150},{field:"AP - Jun 2021",headerName:"Jun 2021",type:"number"},{field:"AP - Jun 2021 Upside",headerName:"Jun 2021 Upside",width:150},{field:"AP - Aug 2021",headerName:"Aug 2021",type:"number"},{field:"AP - Aug 2021 Upside",headerName:"Aug 2021 Upside",width:150},{field:"AP - Sep 2021",headerName:"Sep 2021",type:"number"},{field:"AP - Sep 2021 Upside",headerName:"Sep 2021 Upside",width:150},{field:"AP - Oct 2021",headerName:"Oct 2021",type:"number"},{field:"AP - Oct 2021 Upside",headerName:"Oct 2021 Upside",width:150}],p=Object(m.a)({root:{"& .cold":{backgroundColor:"red",color:"white"},"& .hot":{backgroundColor:"green",color:"white"},sticky:{position:"sticky",left:0,background:"white",boxShadow:"5px 2px 5px grey"}}});function v(){var e=p(),t=Object(n.useState)([]),r=Object(d.a)(t,2),i=r[0],l=r[1],a=[],c=new Promise((function(e,t){fetch("./data.json",{}).then((function(t){e(t.json())})).catch((function(e){t(Error("Get config failed"))}))})),m=function(e){var t=e.ticker.replace(".","-"),r=e.country?e.country:"CAN",n=e.id,i=y+"https://www.theglobeandmail.com/investing/markets/stocks/"+t+"-T/";if("US"===r){if("etf"===e.type)return;e.exchange.startsWith("NYSE")?t+="-N/":t+="-Q/",i=y+"https://www.theglobeandmail.com/investing/markets/stocks/"+t}u()(i).then((function(e){var t,r,i,o,d,c;e=JSON.parse(e).contents;var u=(new DOMParser).parseFromString(e,"text/html"),s=a.findIndex((function(e){return e.id===n})),m=a[s];m["5d-return"]=null===(t=u.querySelector('[name="percentChange5d"]'))||void 0===t?void 0:t.getAttribute("value"),m["1m-return"]=null===(r=u.querySelector('[headers="pricePerformanceData_period_1m pricePerformanceData_performance"] span'))||void 0===r?void 0:r.textContent.split("(")[1].split(")")[0],m["3m-return"]=null===(i=u.querySelector('[headers="pricePerformanceData_period_3m pricePerformanceData_performance"] span'))||void 0===i?void 0:i.textContent.split("(")[1].split(")")[0],m["1y-return"]=null===(o=u.querySelector('[name="return1y"]'))||void 0===o?void 0:o.getAttribute("value"),m["3y-return"]=null===(d=u.querySelector('[name="return3y"]'))||void 0===d?void 0:d.getAttribute("value"),m["5y-return"]=null===(c=u.querySelector('[name="return5y"]'))||void 0===c?void 0:c.getAttribute("value"),l(a)})).catch((function(e){console.log("Stocks Perf failed")}))},v=function(e){var t=e.ticker,r=e.country?e.country:"CAN",n=e.id,i=y+"https://marketsandresearch.td.com/tdwca/Public/ETFsProfile/PerformanceAndRisk/ca/";"US"===r&&(i=y+"https://marketsandresearch.td.com/tdwca/Public/ETFsProfile/PerformanceAndRisk/us/"),u()(i+t).then((function(t){var r,i,o,d,c,u,s;t=JSON.parse(t).contents;var h=(new DOMParser).parseFromString(t,"text/html"),y=a.findIndex((function(e){return e.id===n})),f=a[y];f.Risk=null===(r=h.querySelectorAll(".risk-rating")[0])||void 0===r?void 0:r.querySelector(".active").textContent,f.Return=null===(i=h.querySelectorAll(".risk-rating")[1])||void 0===i?void 0:i.querySelector(".active").textContent,f["3m-return"]=null===(o=h.querySelectorAll(".PerformanceOverTimeView table tr")[1])||void 0===o?void 0:o.querySelectorAll("div")[1].textContent,f["6m-return"]=null===(d=h.querySelectorAll(".PerformanceOverTimeView table tr")[1])||void 0===d?void 0:d.querySelectorAll("div")[2].textContent,f["3y-return"]=null===(c=h.querySelectorAll(".PerformanceOverTimeView table tr")[1])||void 0===c?void 0:c.querySelectorAll("div")[3].textContent,f["5y-return"]=null===(u=h.querySelectorAll(".PerformanceOverTimeView table tr")[1])||void 0===u?void 0:u.querySelectorAll("div")[4].textContent,f["10y-return"]=null===(s=h.querySelectorAll(".PerformanceOverTimeView table tr")[1])||void 0===s?void 0:s.querySelectorAll("div")[5].textContent,l(a),m(e)})).catch((function(e){console.log("ETFs Perf failed")}))};return Object(n.useEffect)((function(){c.then((function(e){e.map((function(e){return"stock"===e.type?function(e){var t=e.ticker,r=e.country?e.country:"CAN",n=y+"https://marketsandresearch.td.com/tdwca/Public/Stocks/Overview/ca/";"US"===r&&(n=y+"https://marketsandresearch.td.com/tdwca/Public/Stocks/Overview/us/"),u()(n+t).then((function(t){t=JSON.parse(t).contents;var r=(new DOMParser).parseFromString(t,"text/html"),n={};n.id=e.id,n.Ticker=r.querySelector(".issueExchange").textContent+r.querySelector(".issueSymbol").textContent,e.exchange=r.querySelector(".issueExchange").textContent,n.Name=r.querySelector(".issueName").textContent,n.Category=r.querySelector(".PeersModule a").text.split("-")[0],n.Price=r.querySelector(".primary-data-content li div span").textContent,n.Change=r.querySelector(".changePercent").textContent.replace("(","").replace(")","").trim(),n["52W-Low"]=r.querySelectorAll("div[low]")[1].getAttribute("low"),n["52W-High"]=r.querySelectorAll("div[low]")[1].getAttribute("high"),n.Volume=r.querySelector(".volume-label ~ div").textContent,n["Market-Cap"]=r.querySelectorAll(".fundamentalsTable tr")[0].querySelectorAll("div")[1].textContent,n["Dividend-Yield"]=r.querySelectorAll(".fundamentalsTable tr")[3].querySelectorAll("div")[1].textContent,n["Ex-Dividend-Date"]=r.querySelectorAll(".fundamentalsTable tr")[5].querySelectorAll("div")[1].textContent;for(var i=0,c=Object.entries(e);i<c.length;i++){var u=Object(d.a)(c[i],2),s=u[0],h=u[1];s.startsWith("AP")&&(n[s]=h);var y=100*(h/n.Price-1);n[s+" Upside"]=y.toFixed(2)+"%"}a=[].concat(Object(o.a)(a),[n]),l(a),m(e)})).catch((function(e){console.log("Stocks failed")}))}(e):function(e){var t=e.ticker,r=e.country?e.country:"CAN",n=y+"https://marketsandresearch.td.com/tdwca/Public/ETFsProfile/Summary/ca/";"US"===r&&(n=y+"https://marketsandresearch.td.com/tdwca/Public/ETFsProfile/Summary/us/"),u()(n+t).then((function(t){var r,n,i,d,c;t=JSON.parse(t).contents;var u=(new DOMParser).parseFromString(t,"text/html"),s={};s.id=e.id,s.Ticker=u.querySelector(".issueExchange").textContent+u.querySelector(".issueSymbol").textContent,e.exchange=u.querySelector(".issueExchange").textContent,s.Name=u.querySelector(".issueName").textContent,s.Price=u.querySelector(".primary-data-content li div span").textContent,s.Change=u.querySelector(".changePercent").textContent.replace("(","").replace(")","").trim(),s["52W-Low"]=u.querySelectorAll("div[low]")[1].getAttribute("low"),s["52W-High"]=u.querySelectorAll("div[low]")[1].getAttribute("high"),s.Volume=u.querySelector(".volume-label ~ div").textContent,s.Rating=null===(r=u.querySelector(".secondary-data-content").querySelector("li:last-child").querySelector(".star-row").querySelectorAll("span")[10])||void 0===r?void 0:r.textContent,s.Category=u.querySelector(".topFundInfo").querySelectorAll("tr")[1].querySelector("span:last-child").textContent,s.Inception=u.querySelector(".topFundInfo").querySelectorAll("tr")[3].querySelector("span:last-child").textContent,s.Assets=null===(n=u.querySelectorAll(".FundProfileView table tr")[5].querySelector("td"))||void 0===n?void 0:n.textContent,s["Dividend-Yield"]=null===(i=u.querySelectorAll(".FundProfileView table tr")[10].querySelector("td"))||void 0===i?void 0:i.textContent,s["Ex-Dividend-Date"]=null===(d=u.querySelectorAll(".FundProfileView table tr")[12].querySelector("td"))||void 0===d?void 0:d.textContent,s.MER=null===(c=u.querySelectorAll(".FundProfileView table tr")[19].querySelector("td"))||void 0===c?void 0:c.textContent,a=[].concat(Object(o.a)(a),[s]),l(a),v(e)})).catch((function(e){console.log("ETFs failed")}))}(e),null}))}))}),[]),Object(h.jsxs)("div",{className:e.root,children:[Object(h.jsx)("h1",{children:"Stocks"}),Object(h.jsxs)("h3",{children:["Last refreshed: ",(new Date).toDateString()," ",(new Date).toLocaleTimeString()]}),Object(h.jsx)("div",{style:{height:.75*window.innerHeight,width:"100%"},children:Object(h.jsx)("div",{style:{display:"flex",height:"100%"},children:Object(h.jsx)("div",{style:{flexGrow:1},children:Object(h.jsx)(s.a,{rows:i,columns:f,checkboxSelection:!0,getCellClassName:function(e){var t,r;return e.field.includes("Upside")?Number(null===(t=e.value)||void 0===t?void 0:t.split("%")[0])>=5?"hot":null:"Change"===e.field?Number(null===(r=e.value)||void 0===r?void 0:r.split("%")[0])>=0?"hot":"cold":"id"===e.field?"sticky":""},onRowDoubleClick:function(e,t){alert("".concat(e.row.Ticker," --\x3e ").concat(e.row.Name," --\x3e ").concat(e.row.Price))}})})})})]})}var S=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,641)).then((function(t){var r=t.getCLS,n=t.getFID,i=t.getFCP,l=t.getLCP,a=t.getTTFB;r(e),n(e),i(e),l(e),a(e)}))};a.a.render(Object(h.jsx)(i.a.StrictMode,{children:Object(h.jsx)(v,{})}),document.getElementById("root")),S()}},[[567,1,2]]]);
//# sourceMappingURL=main.eb323361.chunk.js.map